<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>3D Mountains Globe</title>

  <!-- Cesium CDN -->
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.133/Build/Cesium/Cesium.js"></script>
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.133/Build/Cesium/Widgets/widgets.css" rel="stylesheet">

  <style>
    html,
    body,
    #cesiumContainer {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }

    #toolbar {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 1;
      background: rgba(42, 42, 42, 0.8);
      padding: 10px;
      border-radius: 5px;
    }

    #toolbar button {
      margin: 3px;
      padding: 5px 10px;
      background: #007ACC;
      color: white;
      border: none;
      border-radius: 3px;
      cursor: pointer;
    }

    #toolbar button:hover {
      background: #005A99;
    }
  </style>
</head>

<body>
  <div id="cesiumContainer"></div>
  <div id="toolbar"></div>
  <script type="module">
    // Your access token can be found at: https://ion.cesium.com/tokens.
    // Replace `your_access_token` with your Cesium ion access token.

    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJmY2FmNGY3Yy04Njc5LTQxNGEtYjNlNi1kNTllMDAzNDMyNzkiLCJpZCI6MzQyOTg5LCJpYXQiOjE3NTgzMTg0Nzd9.djuPPuVjdx8CSbzNRIuAM7g-OzvMyfudddoUMaxhdEo';

    // Initialize viewer
    const viewer = new Cesium.Viewer('cesiumContainer', {
      terrain: Cesium.Terrain.fromWorldTerrain(),
    });

    // Fly the camera to a reasonable initial view
    viewer.camera.flyTo({
      destination: Cesium.Cartesian3.fromDegrees(0, 20, 30000000)
    });

    // Summit points
    const summits = [
      { name: "Mount Everest", lon: 86.925, lat: 27.9881, height: 8849 },
      { name: "K2", lon: 76.5133, lat: 35.8818, height: 8611 },
      { name: "Denali", lon: -151.0074, lat: 63.0695, height: 6190 },
      { name: "Mount Rainier", lon: -121.7604, lat: 46.8523, height: 4392 }
    ];

    // Add summit points
    summits.forEach(mountain => {
      viewer.entities.add({
        name: mountain.name,
        position: Cesium.Cartesian3.fromDegrees(mountain.lon, mountain.lat, mountain.height),
        point: { pixelSize: 10, color: Cesium.Color.RED },
        label: {
          text: mountain.name,
          font: "16px sans-serif",
          fillColor: Cesium.Color.WHITE,
          style: Cesium.LabelStyle.FILL_AND_OUTLINE,
          outlineWidth: 2,
          verticalOrigin: Cesium.VerticalOrigin.BOTTOM
        }
      });
    });

    // Fly-to function
    function flyToSummit(name) {
      const summit = summits.find(m => m.name === name);
      if (summit) {
        viewer.camera.flyTo({
          destination: Cesium.Cartesian3.fromDegrees(summit.lon, summit.lat, summit.height + 2000),
          orientation: {
            heading: Cesium.Math.toRadians(0.0),
            pitch: Cesium.Math.toRadians(-30.0)
          }
        });
      }
    }

    // Build toolbar buttons
    const toolbar = document.getElementById('toolbar');
    summits.forEach(m => {
      const btn = document.createElement('button');
      btn.textContent = m.name;
      btn.onclick = () => flyToSummit(m.name);
      toolbar.appendChild(btn);
    });

    // Optional: Add OSM Buildings layer
    (async () => {
      const buildingTileset = await Cesium.createOsmBuildingsAsync();
      viewer.scene.primitives.add(buildingTileset);
    })();

    // Lighting and depth testing
    viewer.scene.globe.enableLighting = true;
    viewer.scene.globe.depthTestAgainstTerrain = true;
  </script>
</body>

</html>