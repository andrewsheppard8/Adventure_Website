{% extends "base.html" %}

{% block title %}Admin Pictures{% endblock %}

{% block content %}
<h1>Admin: Manage Pictures</h1>

<!-- Upload New Picture -->
<h2>Upload New Picture</h2>
<form method="POST" enctype="multipart/form-data">
    <label>File: <input type="file" name="file" required></label><br>
    <label>Title: <input type="text" name="title"></label><br>
    <label>Description: <textarea name="description"></textarea></label><br>
    <label>Date Taken: <input type="date" name="date_taken"></label><br>
    <button type="submit">Upload</button>
</form>

<hr>

<!-- Edit Existing Pictures -->
<h2>Edit Existing Pictures</h2>
{% for pic in pictures %}
<div style="border:1px solid #ccc; padding:10px; margin-bottom:10px; display:flex; gap:20px; align-items:flex-start;">
    
    <!-- Left: Thumbnail -->
    <div>
        <img src="{{ url_for('static', filename='images/' ~ pic['filename']) }}" width="150"><br>
    </div>
    
    <!-- Right: Edit form + Delete -->
    <div style="flex:1;">
        <!-- Edit Form -->
        <form method="POST" style="margin-bottom:10px;">
            <input type="hidden" name="edit_id" value="{{ pic['id'] }}">
            <label>Title: <input type="text" name="edit_title" value="{{ pic['title'] }}"></label><br>
            <label>Description: <textarea name="edit_description">{{ pic['description'] }}</textarea></label><br>
            <label>Date Taken: <input type="date" name="edit_date" value="{{ pic['date_taken'] }}"></label><br>
            <button type="submit">Save Changes</button>
        </form>

        <!-- Delete Form -->
        <form method="POST" action="{{ url_for('delete_picture', pic_id=pic['id']) }}" onsubmit="return confirm('Are you sure you want to delete this picture?');">
            <button type="submit" style="background-color:#d9534f; color:white; border:none; padding:5px 10px; cursor:pointer; border-radius:4px;">Delete</button>
        </form>
    </div>
</div>
{% endfor %}

{% endblock %}