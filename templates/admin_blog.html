{% extends "base.html" %}

{% block title %}Admin Blog{% endblock %}

{% block content %}
<div class="admin-page">
    <h1>Admin: Manage Blog Posts</h1>

    <!-- Add New Post -->
    <h2>Add New Post</h2>
    <form method="POST" style="margin-bottom:30px;">
        <label>Title:<br>
            <input type="text" name="new_title" required>
        </label><br>
        <label>Description:<br>
            <textarea name="new_description" rows="4"></textarea>
        </label><br>
        <label>Location:<br>
            <input type="text" name="new_location">
        </label><br>
        <label>Date:<br>
            <input type="date" name="new_date">
        </label><br>
        <button type="submit" style="padding:10px 18px; font-size:1.1em; margin-top:10px;">Add Post</button>
    </form>

    <hr>

    <!-- Edit Existing Posts -->
    <h2>Edit Existing Posts</h2>
    {% for post in posts %}
    <div style="border:1px solid #ccc; padding:15px; margin-bottom:20px; display:flex; gap:20px; flex-wrap:wrap; border-radius:8px; align-items:flex-start;">
        
        <div style="flex:1; min-width:250px;">
            <!-- Edit Form -->
            <form method="POST" style="margin-bottom:10px;">
                <input type="hidden" name="edit_id" value="{{ post['id'] }}">
                <label>Title:<br>
                    <input type="text" name="edit_title" value="{{ post['title'] }}">
                </label><br>
                <label>Description:<br>
                    <textarea name="edit_description" rows="4">{{ post['description'] }}</textarea>
                </label><br>
                <label>Location:<br>
                    <input type="text" name="edit_location" value="{{ post['location'] }}">
                </label><br>
                <label>Date:<br>
                    <input type="date" name="edit_date" value="{{ post['date'] }}">
                </label><br>
                <button type="submit" style="padding:8px 16px; font-size:1em; margin-top:5px;">Save Changes</button>
            </form>

            <!-- Delete Form -->
            <form method="POST" action="{{ url_for('delete_blog_post', post_id=post['id']) }}" 
                  onsubmit="return confirm('Are you sure you want to delete this post?');">
                <button type="submit" style="background-color:#d9534f; color:white; border:none; padding:8px 14px; cursor:pointer; border-radius:5px; font-size:1em;">Delete</button>
            </form>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
