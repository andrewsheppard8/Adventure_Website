{% extends "base.html" %}

{% block title %}Admin Blog{% endblock %}

{% block content %}
<h1>Admin: Manage Blog Posts</h1>

<!-- Add New Post -->
<h2>Add New Post</h2>
<form method="POST">
    <label>Title: <input type="text" name="new_title" required></label><br>
    <label>Description: <textarea name="new_description"></textarea></label><br>
    <label>Location: <input type="text" name="new_location"></label><br>
    <label>Date: <input type="date" name="new_date"></label><br>
    <button type="submit">Add Post</button>
</form>

<hr>

<!-- Edit Existing Posts -->
<h2>Edit Existing Posts</h2>
{% for post in posts %}
<div style="border:1px solid #ccc; padding:10px; margin-bottom:10px; display:flex; gap:20px; align-items:flex-start;">
    
    <div style="flex:1;">
        <!-- Edit Form -->
        <form method="POST" style="margin-bottom:10px;">
            <input type="hidden" name="edit_id" value="{{ post['id'] }}">
            <label>Title: <input type="text" name="edit_title" value="{{ post['title'] }}"></label><br>
            <label>Description: <textarea name="edit_description">{{ post['description'] }}</textarea></label><br>
            <label>Location: <input type="text" name="edit_location" value="{{ post['location'] }}"></label><br>
            <label>Date: <input type="date" name="edit_date" value="{{ post['date'] }}"></label><br>
            <button type="submit">Save Changes</button>
        </form>

        <!-- Delete Form -->
        <form method="POST" action="{{ url_for('delete_blog_post', post_id=post['id']) }}"
              onsubmit="return confirm('Are you sure you want to delete this post?');">
            <button type="submit" style="background-color:#d9534f; color:white; border:none; padding:5px 10px; cursor:pointer; border-radius:4px;">Delete</button>
        </form>
    </div>
</div>
{% endfor %}

{% endblock %}